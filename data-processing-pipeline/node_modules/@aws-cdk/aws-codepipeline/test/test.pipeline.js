"use strict";
const assert_1 = require("@aws-cdk/assert");
const cloudformation = require("@aws-cdk/aws-cloudformation");
const codebuild = require("@aws-cdk/aws-codebuild");
const codecommit = require("@aws-cdk/aws-codecommit");
const lambda = require("@aws-cdk/aws-lambda");
const s3 = require("@aws-cdk/aws-s3");
const sns = require("@aws-cdk/aws-sns");
const cdk = require("@aws-cdk/cdk");
const codepipeline = require("../lib");
function stageForTesting(stack) {
    const pipeline = new codepipeline.Pipeline(stack, 'pipeline');
    return new codepipeline.Stage(pipeline, 'stage', { pipeline });
}
function repositoryForTesting(stack) {
    return new codecommit.Repository(stack, 'Repository', {
        repositoryName: 'Repository'
    });
}
module.exports = {
    'basic pipeline'(test) {
        const stack = new cdk.Stack();
        const repository = new codecommit.Repository(stack, 'MyRepo', {
            repositoryName: 'my-repo',
        });
        const pipeline = new codepipeline.Pipeline(stack, 'Pipeline');
        const sourceStage = new codepipeline.Stage(pipeline, 'source', { pipeline });
        const source = new codecommit.PipelineSourceAction(stack, 'source', {
            stage: sourceStage,
            outputArtifactName: 'SourceArtifact',
            repository,
        });
        const buildStage = new codepipeline.Stage(pipeline, 'build', { pipeline });
        const project = new codebuild.Project(stack, 'MyBuildProject', {
            source: new codebuild.CodePipelineSource()
        });
        new codebuild.PipelineBuildAction(stack, 'build', {
            stage: buildStage,
            inputArtifact: source.outputArtifact,
            project,
        });
        test.notDeepEqual(stack.toCloudFormation(), {});
        test.deepEqual([], pipeline.node.validateTree());
        test.done();
    },
    'github action uses ThirdParty owner'(test) {
        const stack = new cdk.Stack();
        const secret = new cdk.SecretParameter(stack, 'GitHubToken', { ssmParameter: 'my-token' });
        const p = new codepipeline.Pipeline(stack, 'P');
        const s1 = new codepipeline.Stage(stack, 'Source', { pipeline: p });
        new codepipeline.GitHubSourceAction(stack, 'GH', {
            stage: s1,
            runOrder: 8,
            outputArtifactName: 'A',
            branch: 'branch',
            oauthToken: secret.value,
            owner: 'foo',
            repo: 'bar'
        });
        const s2 = new codepipeline.Stage(stack, 'Two', { pipeline: p });
        new codepipeline.ManualApprovalAction(stack, 'Boo', { stage: s2 });
        assert_1.expect(stack).to(assert_1.haveResourceLike('AWS::CodePipeline::Pipeline', {
            "ArtifactStore": {
                "Location": {
                    "Ref": "PArtifactsBucket5E711C12"
                },
                "Type": "S3"
            },
            "RoleArn": {
                "Fn::GetAtt": [
                    "PRole07BDC907",
                    "Arn"
                ]
            },
            "Stages": [
                {
                    "Actions": [
                        {
                            "ActionTypeId": {
                                "Category": "Source",
                                "Owner": "ThirdParty",
                                "Provider": "GitHub",
                                "Version": "1"
                            },
                            "Configuration": {
                                "Owner": "foo",
                                "Repo": "bar",
                                "Branch": "branch",
                                "OAuthToken": {
                                    "Ref": "GitHubTokenParameterBB166B9D"
                                },
                                "PollForSourceChanges": false
                            },
                            "InputArtifacts": [],
                            "Name": "GH",
                            "OutputArtifacts": [
                                {
                                    "Name": "A"
                                }
                            ],
                            "RunOrder": 8
                        }
                    ],
                    "Name": "Source"
                },
                {
                    "Actions": [
                        {
                            "ActionTypeId": {
                                "Category": "Approval",
                                "Owner": "AWS",
                                "Provider": "Manual",
                                "Version": "1"
                            },
                            "InputArtifacts": [],
                            "Name": "Boo",
                            "OutputArtifacts": [],
                            "RunOrder": 1
                        }
                    ],
                    "Name": "Two"
                }
            ]
        }));
        test.deepEqual([], p.node.validateTree());
        test.done();
    },
    'onStateChange'(test) {
        const stack = new cdk.Stack();
        const topic = new sns.Topic(stack, 'Topic');
        const pipeline = new codepipeline.Pipeline(stack, 'PL');
        const stage1 = new codepipeline.Stage(stack, 'S1', { pipeline });
        new s3.PipelineSourceAction(stack, 'A1', {
            stage: stage1,
            outputArtifactName: 'Artifact',
            bucket: new s3.Bucket(stack, 'Bucket'),
            bucketKey: 'Key'
        });
        const stage2 = new codepipeline.Stage(stack, 'S2', { pipeline });
        new codepipeline.ManualApprovalAction(stack, 'A2', { stage: stage2 });
        pipeline.onStateChange('OnStateChange', topic, {
            description: 'desc',
            scheduleExpression: 'now',
            eventPattern: {
                detail: {
                    state: ['FAILED']
                }
            }
        });
        assert_1.expect(stack).to(assert_1.haveResource('AWS::Events::Rule', {
            "Description": "desc",
            "EventPattern": {
                "detail": {
                    "state": [
                        "FAILED"
                    ]
                },
                "detail-type": [
                    "CodePipeline Pipeline Execution State Change"
                ],
                "source": [
                    "aws.codepipeline"
                ],
                "resources": [
                    {
                        "Fn::Join": [
                            "",
                            [
                                "arn:",
                                {
                                    "Ref": "AWS::Partition"
                                },
                                ":codepipeline:",
                                {
                                    "Ref": "AWS::Region"
                                },
                                ":",
                                {
                                    "Ref": "AWS::AccountId"
                                },
                                ":",
                                {
                                    "Ref": "PLD5425AEA"
                                }
                            ]
                        ]
                    }
                ]
            },
            "ScheduleExpression": "now",
            "State": "ENABLED",
            "Targets": [
                {
                    "Arn": {
                        "Ref": "TopicBFC7AF6E"
                    },
                    "Id": "Topic"
                }
            ]
        }));
        test.deepEqual([], pipeline.node.validateTree());
        test.done();
    },
    'manual approval Action': {
        'allows passing an SNS Topic when constructing it'(test) {
            const stack = new cdk.Stack();
            const topic = new sns.Topic(stack, 'Topic');
            const manualApprovalAction = new codepipeline.ManualApprovalAction(stack, 'Approve', {
                stage: stageForTesting(stack),
                notificationTopic: topic,
            });
            test.equal(manualApprovalAction.notificationTopic, topic);
            test.done();
        },
    },
    'PipelineProject': {
        'with a custom Project Name': {
            'sets the source and artifacts to CodePipeline'(test) {
                const stack = new cdk.Stack();
                new codebuild.PipelineProject(stack, 'MyProject', {
                    projectName: 'MyProject',
                });
                assert_1.expect(stack).to(assert_1.haveResourceLike('AWS::CodeBuild::Project', {
                    "Name": "MyProject",
                    "Source": {
                        "Type": "CODEPIPELINE"
                    },
                    "Artifacts": {
                        "Type": "CODEPIPELINE"
                    },
                    "ServiceRole": {
                        "Fn::GetAtt": [
                            "MyProjectRole9BBE5233",
                            "Arn"
                        ]
                    },
                    "Environment": {
                        "Type": "LINUX_CONTAINER",
                        "PrivilegedMode": false,
                        "Image": "aws/codebuild/ubuntu-base:14.04",
                        "ComputeType": "BUILD_GENERAL1_SMALL"
                    }
                }));
                test.done();
            }
        }
    },
    'Lambda PipelineInvokeAction can be used to invoke Lambda functions from a CodePipeline'(test) {
        const stack = new cdk.Stack();
        const lambdaFun = new lambda.Function(stack, 'Function', {
            code: new lambda.InlineCode('bla'),
            handler: 'index.handler',
            runtime: lambda.Runtime.NodeJS43,
        });
        const pipeline = new codepipeline.Pipeline(stack, 'Pipeline');
        const bucket = new s3.Bucket(stack, 'Bucket');
        const sourceStage = pipeline.addStage('Source');
        const source1 = bucket.addToPipeline(sourceStage, 'SourceAction1', {
            bucketKey: 'some/key',
            outputArtifactName: 'sourceArtifact1',
        });
        const source2 = bucket.addToPipeline(sourceStage, 'SourceAction2', {
            bucketKey: 'another/key',
            outputArtifactName: 'sourceArtifact2',
        });
        const stage = new codepipeline.Stage(stack, 'Stage', { pipeline });
        const lambdaAction = new lambda.PipelineInvokeAction(stack, 'InvokeAction', {
            stage,
            lambda: lambdaFun,
            userParameters: 'foo-bar/42',
            inputArtifacts: [
                source2.outputArtifact,
                source1.outputArtifact,
            ],
            outputArtifactNames: [
                'lambdaOutput1',
                'lambdaOutput2',
                'lambdaOutput3',
            ],
        });
        assert_1.expect(stack).to(assert_1.haveResourceLike('AWS::CodePipeline::Pipeline', {
            "ArtifactStore": {
                "Location": {
                    "Ref": "PipelineArtifactsBucket22248F97"
                },
                "Type": "S3"
            },
            "RoleArn": {
                "Fn::GetAtt": [
                    "PipelineRoleD68726F7",
                    "Arn"
                ]
            },
            "Stages": [
                {
                    "Name": "Source",
                },
                {
                    "Actions": [
                        {
                            "ActionTypeId": {
                                "Category": "Invoke",
                                "Owner": "AWS",
                                "Provider": "Lambda",
                                "Version": "1"
                            },
                            "Configuration": {
                                "FunctionName": {
                                    "Ref": "Function76856677"
                                },
                                "UserParameters": "foo-bar/42"
                            },
                            "InputArtifacts": [
                                { "Name": "sourceArtifact2" },
                                { "Name": "sourceArtifact1" },
                            ],
                            "Name": "InvokeAction",
                            "OutputArtifacts": [
                                { "Name": "lambdaOutput1" },
                                { "Name": "lambdaOutput2" },
                                { "Name": "lambdaOutput3" },
                            ],
                            "RunOrder": 1
                        }
                    ],
                    "Name": "Stage"
                }
            ]
        }));
        test.equal(lambdaAction.outputArtifacts().length, 3);
        test.notEqual(lambdaAction.outputArtifact('lambdaOutput2'), undefined);
        assert_1.expect(stack, /* skip validation */ true).to(assert_1.haveResource('AWS::IAM::Policy', {
            "PolicyDocument": {
                "Statement": [
                    {
                        "Action": [
                            "codepipeline:PutJobSuccessResult",
                            "codepipeline:PutJobFailureResult"
                        ],
                        "Effect": "Allow",
                        "Resource": "*"
                    }
                ],
                "Version": "2012-10-17"
            },
            "PolicyName": "FunctionServiceRoleDefaultPolicy2F49994A",
            "Roles": [
                {
                    "Ref": "FunctionServiceRole675BB04A"
                }
            ]
        }));
        test.done();
    },
    'CodeCommit Action': {
        'does not poll for changes by default'(test) {
            const stack = new cdk.Stack();
            const sourceAction = new codecommit.PipelineSourceAction(stack, 'stage', {
                stage: stageForTesting(stack),
                outputArtifactName: 'SomeArtifact',
                repository: repositoryForTesting(stack),
            });
            test.equal(sourceAction.configuration.PollForSourceChanges, false);
            test.done();
        },
        'does not poll for source changes when explicitly set to false'(test) {
            const stack = new cdk.Stack();
            const sourceAction = new codecommit.PipelineSourceAction(stack, 'stage', {
                stage: stageForTesting(stack),
                outputArtifactName: 'SomeArtifact',
                repository: repositoryForTesting(stack),
                pollForSourceChanges: false,
            });
            test.equal(sourceAction.configuration.PollForSourceChanges, false);
            test.done();
        },
    },
    'cross-region Pipeline': {
        'generates the required Action & ArtifactStores properties in the template'(test) {
            const pipelineRegion = 'us-west-2';
            const pipelineAccount = '123';
            const app = new cdk.App();
            const stack = new cdk.Stack(app, 'TestStack', {
                env: {
                    region: pipelineRegion,
                    account: pipelineAccount,
                },
            });
            const bucket = new s3.Bucket(stack, 'MyBucket');
            const pipeline = new codepipeline.Pipeline(stack, 'MyPipeline', {
                crossRegionReplicationBuckets: {
                    'us-west-1': 'sfo-replication-bucket',
                },
            });
            const stage1 = pipeline.addStage('Stage1');
            const sourceAction = bucket.addToPipeline(stage1, 'BucketSource', {
                bucketKey: '/some/key',
            });
            const stage2 = pipeline.addStage('Stage2');
            new cloudformation.PipelineCreateReplaceChangeSetAction(stack, 'Action1', {
                stage: stage2,
                changeSetName: 'ChangeSet',
                templatePath: sourceAction.outputArtifact.atPath('template.yaml'),
                stackName: 'SomeStack',
                region: pipelineRegion,
                adminPermissions: false,
            });
            new cloudformation.PipelineCreateUpdateStackAction(stack, 'Action2', {
                stage: stage2,
                templatePath: sourceAction.outputArtifact.atPath('template.yaml'),
                stackName: 'OtherStack',
                region: 'us-east-1',
                adminPermissions: false,
            });
            new cloudformation.PipelineExecuteChangeSetAction(stack, 'Action3', {
                stage: stage2,
                changeSetName: 'ChangeSet',
                stackName: 'SomeStack',
                region: 'us-west-1',
            });
            assert_1.expect(stack).to(assert_1.haveResourceLike('AWS::CodePipeline::Pipeline', {
                "ArtifactStores": [
                    {
                        "Region": "us-east-1",
                        "ArtifactStore": {
                            "Type": "S3",
                        },
                    },
                    {
                        "Region": "us-west-1",
                        "ArtifactStore": {
                            "Location": "sfo-replication-bucket",
                            "Type": "S3",
                        },
                    },
                    {
                        "Region": "us-west-2",
                        "ArtifactStore": {
                            "Type": "S3",
                        },
                    },
                ],
                "Stages": [
                    {
                        "Name": "Stage1",
                    },
                    {
                        "Name": "Stage2",
                        "Actions": [
                            {
                                "Name": "Action1",
                                "Region": "us-west-2",
                            },
                            {
                                "Name": "Action2",
                                "Region": "us-east-1",
                            },
                            {
                                "Name": "Action3",
                                "Region": "us-west-1",
                            },
                        ],
                    },
                ]
            }));
            test.equal(pipeline.crossRegionScaffoldStacks[pipelineRegion], undefined);
            test.equal(pipeline.crossRegionScaffoldStacks['us-west-1'], undefined);
            const usEast1ScaffoldStack = pipeline.crossRegionScaffoldStacks['us-east-1'];
            test.notEqual(usEast1ScaffoldStack, undefined);
            test.equal(usEast1ScaffoldStack.env.region, 'us-east-1');
            test.equal(usEast1ScaffoldStack.env.account, pipelineAccount);
            test.ok(usEast1ScaffoldStack.node.id.indexOf('us-east-1') !== -1, `expected '${usEast1ScaffoldStack.node.id}' to contain 'us-east-1'`);
            test.done();
        },
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGVzdC5waXBlbGluZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInRlc3QucGlwZWxpbmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLDRDQUF5RTtBQUN6RSw4REFBK0Q7QUFDL0Qsb0RBQXFEO0FBQ3JELHNEQUF1RDtBQUN2RCw4Q0FBK0M7QUFDL0Msc0NBQXVDO0FBQ3ZDLHdDQUF5QztBQUN6QyxvQ0FBcUM7QUFFckMsdUNBQXdDO0FBaWdCeEMsU0FBUyxlQUFlLENBQUMsS0FBZ0I7SUFDdkMsTUFBTSxRQUFRLEdBQUcsSUFBSSxZQUFZLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxVQUFVLENBQUMsQ0FBQztJQUM5RCxPQUFPLElBQUksWUFBWSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsT0FBTyxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQztBQUNqRSxDQUFDO0FBRUQsU0FBUyxvQkFBb0IsQ0FBQyxLQUFnQjtJQUM1QyxPQUFPLElBQUksVUFBVSxDQUFDLFVBQVUsQ0FBQyxLQUFLLEVBQUUsWUFBWSxFQUFFO1FBQ3BELGNBQWMsRUFBRSxZQUFZO0tBQzdCLENBQUMsQ0FBQztBQUNMLENBQUM7QUF0Z0JELGlCQUFTO0lBQ1AsZ0JBQWdCLENBQUMsSUFBVTtRQUN6QixNQUFNLEtBQUssR0FBRyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUU5QixNQUFNLFVBQVUsR0FBRyxJQUFJLFVBQVUsQ0FBQyxVQUFVLENBQUMsS0FBSyxFQUFFLFFBQVEsRUFBRTtZQUMzRCxjQUFjLEVBQUUsU0FBUztTQUMzQixDQUFDLENBQUM7UUFFSCxNQUFNLFFBQVEsR0FBRyxJQUFJLFlBQVksQ0FBQyxRQUFRLENBQUMsS0FBSyxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQzlELE1BQU0sV0FBVyxHQUFHLElBQUksWUFBWSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsQ0FBQztR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O1lBQzlELElBQUksQ0FBQyxFQUFFLENBQUMsb0JBQW9CLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQzlELGFBQWEsb0JBQW9CLENBQUMsSUFBSSxDQUFDLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztZQUV2RSxJQUFJLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDZCxDQUFDO0tBQ0Y7Q0FDRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhwZWN0LCBoYXZlUmVzb3VyY2UsIGhhdmVSZXNvdXJjZUxpa2UgfSBmcm9tICdAYXdzLWNkay9hc3NlcnQnO1xuaW1wb3J0IGNsb3VkZm9ybWF0aW9uID0gcmVxdWlyZSgnQGF3cy1jZGsvYXdzLWNsb3VkZm9ybWF0aW9uJyk7XG5pbXBvcnQgY29kZWJ1aWxkID0gcmVxdWlyZSgnQGF3cy1jZGsvYXdzLWNvZGVidWlsZCcpO1xuaW1wb3J0IGNvZGVjb21taXQgPSByZXF1aXJlKCdAYXdzLWNkay9hd3MtY29kZWNvbW1pdCcpO1xuaW1wb3J0IGxhbWJkYSA9IHJlcXVpcmUoJ0Bhd3MtY2RrL2F3cy1sYW1iZGEnKTtcbmltcG9ydCBzMyA9IHJlcXVpcmUoJ0Bhd3MtY2RrL2F3cy1zMycpO1xuaW1wb3J0IHNucyA9IHJlcXVpcmUoJ0Bhd3MtY2RrL2F3cy1zbnMnKTtcbmltcG9ydCBjZGsgPSByZXF1aXJlKCdAYXdzLWNkay9jZGsnKTtcbmltcG9ydCB7IFRlc3QgfSBmcm9tICdub2RldW5pdCc7XG5pbXBvcnQgY29kZXBpcGVsaW5lID0gcmVxdWlyZSgnLi4vbGliJyk7XG5cbi8vIHRzbGludDpkaXNhYmxlOm9iamVjdC1saXRlcmFsLWtleS1xdW90ZXNcblxuZXhwb3J0ID0ge1xuICAnYmFzaWMgcGlwZWxpbmUnKHRlc3Q6IFRlc3QpIHtcbiAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcblxuICAgIGNvbnN0IHJlcG9zaXRvcnkgPSBuZXcgY29kZWNvbW1pdC5SZXBvc2l0b3J5KHN0YWNrLCAnTXlSZXBvJywge1xuICAgICAgIHJlcG9zaXRvcnlOYW1lOiAnbXktcmVwbycsXG4gICAgfSk7XG5cbiAgICBjb25zdCBwaXBlbGluZSA9IG5ldyBjb2RlcGlwZWxpbmUuUGlwZWxpbmUoc3RhY2ssICdQaXBlbGluZScpO1xuICAgIGNvbnN0IHNvdXJjZVN0YWdlID0gbmV3IGNvZGVwaXBlbGluZS5TdGFnZShwaXBlbGluZSwgJ3NvdXJjZScsIHsgcGlwZWxpbmUgfSk7XG4gICAgY29uc3Qgc291cmNlID0gbmV3IGNvZGVjb21taXQuUGlwZWxpbmVTb3VyY2VBY3Rpb24oc3RhY2ssICdzb3VyY2UnLCB7XG4gICAgICBzdGFnZTogc291cmNlU3RhZ2UsXG4gICAgICBvdXRwdXRBcnRpZmFjdE5hbWU6ICdTb3VyY2VBcnRpZmFjdCcsXG4gICAgICByZXBvc2l0b3J5LFxuICAgIH0pO1xuXG4gICAgY29uc3QgYnVpbGRTdGFnZSA9IG5ldyBjb2RlcGlwZWxpbmUuU3RhZ2UocGlwZWxpbmUsICdidWlsZCcsIHsgcGlwZWxpbmUgfSk7XG4gICAgY29uc3QgcHJvamVjdCA9IG5ldyBjb2RlYnVpbGQuUHJvamVjdChzdGFjaywgJ015QnVpbGRQcm9qZWN0Jywge1xuICAgICAgIHNvdXJjZTogbmV3IGNvZGVidWlsZC5Db2RlUGlwZWxpbmVTb3VyY2UoKVxuICAgIH0pO1xuICAgIG5ldyBjb2RlYnVpbGQuUGlwZWxpbmVCdWlsZEFjdGlvbihzdGFjaywgJ2J1aWxkJywge1xuICAgICAgc3RhZ2U6IGJ1aWxkU3RhZ2UsXG4gICAgICBpbnB1dEFydGlmYWN0OiBzb3VyY2Uub3V0cHV0QXJ0aWZhY3QsXG4gICAgICBwcm9qZWN0LFxuICAgIH0pO1xuXG4gICAgdGVzdC5ub3REZWVwRXF1YWwoc3RhY2sudG9DbG91ZEZvcm1hdGlvbigpLCB7fSk7XG4gICAgdGVzdC5kZWVwRXF1YWwoW10sIHBpcGVsaW5lLm5vZGUudmFsaWRhdGVUcmVlKCkpO1xuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICdnaXRodWIgYWN0aW9uIHVzZXMgVGhpcmRQYXJ0eSBvd25lcicodGVzdDogVGVzdCkge1xuICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuXG4gICAgY29uc3Qgc2VjcmV0ID0gbmV3IGNkay5TZWNyZXRQYXJhbWV0ZXIoc3RhY2ssICdHaXRIdWJUb2tlbicsIHsgc3NtUGFyYW1ldGVyOiAnbXktdG9rZW4nIH0pO1xuXG4gICAgY29uc3QgcCA9IG5ldyBjb2RlcGlwZWxpbmUuUGlwZWxpbmUoc3RhY2ssICdQJyk7XG5cbiAgICBjb25zdCBzMSA9IG5ldyBjb2RlcGlwZWxpbmUuU3RhZ2Uoc3RhY2ssICdTb3VyY2UnLCB7IHBpcGVsaW5lOiBwIH0pO1xuICAgIG5ldyBjb2RlcGlwZWxpbmUuR2l0SHViU291cmNlQWN0aW9uKHN0YWNrLCAnR0gnLCB7XG4gICAgICBzdGFnZTogczEsXG4gICAgICBydW5PcmRlcjogOCxcbiAgICAgIG91dHB1dEFydGlmYWN0TmFtZTogJ0EnLFxuICAgICAgYnJhbmNoOiAnYnJhbmNoJyxcbiAgICAgIG9hdXRoVG9rZW46IHNlY3JldC52YWx1ZSxcbiAgICAgIG93bmVyOiAnZm9vJyxcbiAgICAgIHJlcG86ICdiYXInXG4gICAgfSk7XG5cbiAgICBjb25zdCBzMiA9IG5ldyBjb2RlcGlwZWxpbmUuU3RhZ2Uoc3RhY2ssICdUd28nLCB7IHBpcGVsaW5lOiBwIH0pO1xuICAgIG5ldyBjb2RlcGlwZWxpbmUuTWFudWFsQXBwcm92YWxBY3Rpb24oc3RhY2ssICdCb28nLCB7IHN0YWdlOiBzMiB9KTtcblxuICAgIGV4cGVjdChzdGFjaykudG8oaGF2ZVJlc291cmNlTGlrZSgnQVdTOjpDb2RlUGlwZWxpbmU6OlBpcGVsaW5lJywge1xuICAgICAgXCJBcnRpZmFjdFN0b3JlXCI6IHtcbiAgICAgIFwiTG9jYXRpb25cIjoge1xuICAgICAgICBcIlJlZlwiOiBcIlBBcnRpZmFjdHNCdWNrZXQ1RTcxMUMxMlwiXG4gICAgICB9LFxuICAgICAgXCJUeXBlXCI6IFwiUzNcIlxuICAgICAgfSxcbiAgICAgIFwiUm9sZUFyblwiOiB7XG4gICAgICBcIkZuOjpHZXRBdHRcIjogW1xuICAgICAgICBcIlBSb2xlMDdCREM5MDdcIixcbiAgICAgICAgXCJBcm5cIlxuICAgICAgXVxuICAgICAgfSxcbiAgICAgIFwiU3RhZ2VzXCI6IFtcbiAgICAgIHtcbiAgICAgICAgXCJBY3Rpb25zXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiQWN0aW9uVHlwZUlkXCI6IHtcbiAgICAgICAgICBcIkNhdGVnb3J5XCI6IFwiU291cmNlXCIsXG4gICAgICAgICAgXCJPd25lclwiOiBcIlRoaXJkUGFydHlcIixcbiAgICAgICAgICBcIlByb3ZpZGVyXCI6IFwiR2l0SHViXCIsXG4gICAgICAgICAgXCJWZXJzaW9uXCI6IFwiMVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcIkNvbmZpZ3VyYXRpb25cIjoge1xuICAgICAgICAgIFwiT3duZXJcIjogXCJmb29cIixcbiAgICAgICAgICBcIlJlcG9cIjogXCJiYXJcIixcbiAgICAgICAgICBcIkJyYW5jaFwiOiBcImJyYW5jaFwiLFxuICAgICAgICAgIFwiT0F1dGhUb2tlblwiOiB7XG4gICAgICAgICAgICBcIlJlZlwiOiBcIkdpdEh1YlRva2VuUGFyYW1ldGVyQkIxNjZCOURcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJQb2xsRm9yU291cmNlQ2hhbmdlc1wiOiBmYWxzZVxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJJbnB1dEFydGlmYWN0c1wiOiBbXSxcbiAgICAgICAgICBcIk5hbWVcIjogXCJHSFwiLFxuICAgICAgICAgIFwiT3V0cHV0QXJ0aWZhY3RzXCI6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBcIk5hbWVcIjogXCJBXCJcbiAgICAgICAgICB9XG4gICAgICAgICAgXSxcbiAgICAgICAgICBcIlJ1bk9yZGVyXCI6IDhcbiAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBcIk5hbWVcIjogXCJTb3VyY2VcIlxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgXCJBY3Rpb25zXCI6IFtcbiAgICAgICAge1xuICAgICAgICAgIFwiQWN0aW9uVHlwZUlkXCI6IHtcbiAgICAgICAgICBcIkNhdGVnb3J5XCI6IFwiQXBwcm92YWxcIixcbiAgICAgICAgICBcIk93bmVyXCI6IFwiQVdTXCIsXG4gICAgICAgICAgXCJQcm92aWRlclwiOiBcIk1hbnVhbFwiLFxuICAgICAgICAgIFwiVmVyc2lvblwiOiBcIjFcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJJbnB1dEFydGlmYWN0c1wiOiBbXSxcbiAgICAgICAgICBcIk5hbWVcIjogXCJCb29cIixcbiAgICAgICAgICBcIk91dHB1dEFydGlmYWN0c1wiOiBbXSxcbiAgICAgICAgICBcIlJ1bk9yZGVyXCI6IDFcbiAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBcIk5hbWVcIjogXCJUd29cIlxuICAgICAgfVxuICAgICAgXVxuICAgIH0pKTtcblxuICAgIHRlc3QuZGVlcEVxdWFsKFtdLCBwLm5vZGUudmFsaWRhdGVUcmVlKCkpO1xuICAgIHRlc3QuZG9uZSgpO1xuICB9LFxuXG4gICdvblN0YXRlQ2hhbmdlJyh0ZXN0OiBUZXN0KSB7XG4gICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICBjb25zdCB0b3BpYyA9IG5ldyBzbnMuVG9waWMoc3RhY2ssICdUb3BpYycpO1xuXG4gICAgY29uc3QgcGlwZWxpbmUgPSBuZXcgY29kZXBpcGVsaW5lLlBpcGVsaW5lKHN0YWNrLCAnUEwnKTtcblxuICAgIGNvbnN0IHN0YWdlMSA9IG5ldyBjb2RlcGlwZWxpbmUuU3RhZ2Uoc3RhY2ssICdTMScsIHsgcGlwZWxpbmUgfSk7XG4gICAgbmV3IHMzLlBpcGVsaW5lU291cmNlQWN0aW9uKHN0YWNrLCAnQTEnLCB7XG4gICAgICBzdGFnZTogc3RhZ2UxLFxuICAgICAgb3V0cHV0QXJ0aWZhY3ROYW1lOiAnQXJ0aWZhY3QnLFxuICAgICAgYnVja2V0OiBuZXcgczMuQnVja2V0KHN0YWNrLCAnQnVja2V0JyksXG4gICAgICBidWNrZXRLZXk6ICdLZXknXG4gICAgfSk7XG5cbiAgICBjb25zdCBzdGFnZTIgPSBuZXcgY29kZXBpcGVsaW5lLlN0YWdlKHN0YWNrLCAnUzInLCB7IHBpcGVsaW5lIH0pO1xuICAgIG5ldyBjb2RlcGlwZWxpbmUuTWFudWFsQXBwcm92YWxBY3Rpb24oc3RhY2ssICdBMicsIHsgc3RhZ2U6IHN0YWdlMiB9KTtcblxuICAgIHBpcGVsaW5lLm9uU3RhdGVDaGFuZ2UoJ09uU3RhdGVDaGFuZ2UnLCB0b3BpYywge1xuICAgICAgZGVzY3JpcHRpb246ICdkZXNjJyxcbiAgICAgIHNjaGVkdWxlRXhwcmVzc2lvbjogJ25vdycsXG4gICAgICBldmVudFBhdHRlcm46IHtcbiAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgc3RhdGU6IFsgJ0ZBSUxFRCcgXVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBleHBlY3Qoc3RhY2spLnRvKGhhdmVSZXNvdXJjZSgnQVdTOjpFdmVudHM6OlJ1bGUnLCB7XG4gICAgICBcIkRlc2NyaXB0aW9uXCI6IFwiZGVzY1wiLFxuICAgICAgXCJFdmVudFBhdHRlcm5cIjoge1xuICAgICAgICBcImRldGFpbFwiOiB7XG4gICAgICAgIFwic3RhdGVcIjogW1xuICAgICAgICAgIFwiRkFJTEVEXCJcbiAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICBcImRldGFpbC10eXBlXCI6IFtcbiAgICAgICAgXCJDb2RlUGlwZWxpbmUgUGlwZWxpbmUgRXhlY3V0aW9uIFN0YXRlIENoYW5nZVwiXG4gICAgICAgIF0sXG4gICAgICAgIFwic291cmNlXCI6IFtcbiAgICAgICAgXCJhd3MuY29kZXBpcGVsaW5lXCJcbiAgICAgICAgXSxcbiAgICAgICAgXCJyZXNvdXJjZXNcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJGbjo6Sm9pblwiOiBbXG4gICAgICAgICAgXCJcIixcbiAgICAgICAgICBbXG4gICAgICAgICAgICBcImFybjpcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgIFwiUmVmXCI6IFwiQVdTOjpQYXJ0aXRpb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiOmNvZGVwaXBlbGluZTpcIixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgIFwiUmVmXCI6IFwiQVdTOjpSZWdpb25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiOlwiLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgXCJSZWZcIjogXCJBV1M6OkFjY291bnRJZFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCI6XCIsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICBcIlJlZlwiOiBcIlBMRDU0MjVBRUFcIlxuICAgICAgICAgICAgfVxuICAgICAgICAgIF1cbiAgICAgICAgICBdXG4gICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIFwiU2NoZWR1bGVFeHByZXNzaW9uXCI6IFwibm93XCIsXG4gICAgICBcIlN0YXRlXCI6IFwiRU5BQkxFRFwiLFxuICAgICAgXCJUYXJnZXRzXCI6IFtcbiAgICAgICAge1xuICAgICAgICBcIkFyblwiOiB7XG4gICAgICAgICAgXCJSZWZcIjogXCJUb3BpY0JGQzdBRjZFXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJJZFwiOiBcIlRvcGljXCJcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pKTtcblxuICAgIHRlc3QuZGVlcEVxdWFsKFtdLCBwaXBlbGluZS5ub2RlLnZhbGlkYXRlVHJlZSgpKTtcbiAgICB0ZXN0LmRvbmUoKTtcbiAgfSxcblxuICAnbWFudWFsIGFwcHJvdmFsIEFjdGlvbic6IHtcbiAgICAnYWxsb3dzIHBhc3NpbmcgYW4gU05TIFRvcGljIHdoZW4gY29uc3RydWN0aW5nIGl0Jyh0ZXN0OiBUZXN0KSB7XG4gICAgICBjb25zdCBzdGFjayA9IG5ldyBjZGsuU3RhY2soKTtcbiAgICAgIGNvbnN0IHRvcGljID0gbmV3IHNucy5Ub3BpYyhzdGFjaywgJ1RvcGljJyk7XG4gICAgICBjb25zdCBtYW51YWxBcHByb3ZhbEFjdGlvbiA9IG5ldyBjb2RlcGlwZWxpbmUuTWFudWFsQXBwcm92YWxBY3Rpb24oc3RhY2ssICdBcHByb3ZlJywge1xuICAgICAgICBzdGFnZTogc3RhZ2VGb3JUZXN0aW5nKHN0YWNrKSxcbiAgICAgICAgbm90aWZpY2F0aW9uVG9waWM6IHRvcGljLFxuICAgICAgfSk7XG5cbiAgICAgIHRlc3QuZXF1YWwobWFudWFsQXBwcm92YWxBY3Rpb24ubm90aWZpY2F0aW9uVG9waWMsIHRvcGljKTtcblxuICAgICAgdGVzdC5kb25lKCk7XG4gICAgfSxcbiAgfSxcblxuICAnUGlwZWxpbmVQcm9qZWN0Jzoge1xuICAgICd3aXRoIGEgY3VzdG9tIFByb2plY3QgTmFtZSc6IHtcbiAgICAgICdzZXRzIHRoZSBzb3VyY2UgYW5kIGFydGlmYWN0cyB0byBDb2RlUGlwZWxpbmUnKHRlc3Q6IFRlc3QpIHtcbiAgICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICAgICAgbmV3IGNvZGVidWlsZC5QaXBlbGluZVByb2plY3Qoc3RhY2ssICdNeVByb2plY3QnLCB7XG4gICAgICAgICAgcHJvamVjdE5hbWU6ICdNeVByb2plY3QnLFxuICAgICAgICB9KTtcblxuICAgICAgICBleHBlY3Qoc3RhY2spLnRvKGhhdmVSZXNvdXJjZUxpa2UoJ0FXUzo6Q29kZUJ1aWxkOjpQcm9qZWN0Jywge1xuICAgICAgICAgIFwiTmFtZVwiOiBcIk15UHJvamVjdFwiLFxuICAgICAgICAgIFwiU291cmNlXCI6IHtcbiAgICAgICAgICBcIlR5cGVcIjogXCJDT0RFUElQRUxJTkVcIlxuICAgICAgICAgIH0sXG4gICAgICAgICAgXCJBcnRpZmFjdHNcIjoge1xuICAgICAgICAgIFwiVHlwZVwiOiBcIkNPREVQSVBFTElORVwiXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcIlNlcnZpY2VSb2xlXCI6IHtcbiAgICAgICAgICBcIkZuOjpHZXRBdHRcIjogW1xuICAgICAgICAgICAgXCJNeVByb2plY3RSb2xlOUJCRTUyMzNcIixcbiAgICAgICAgICAgIFwiQXJuXCJcbiAgICAgICAgICBdXG4gICAgICAgICAgfSxcbiAgICAgICAgICBcIkVudmlyb25tZW50XCI6IHtcbiAgICAgICAgICBcIlR5cGVcIjogXCJMSU5VWF9DT05UQUlORVJcIixcbiAgICAgICAgICBcIlByaXZpbGVnZWRNb2RlXCI6IGZhbHNlLFxuICAgICAgICAgIFwiSW1hZ2VcIjogXCJhd3MvY29kZWJ1aWxkL3VidW50dS1iYXNlOjE0LjA0XCIsXG4gICAgICAgICAgXCJDb21wdXRlVHlwZVwiOiBcIkJVSUxEX0dFTkVSQUwxX1NNQUxMXCJcbiAgICAgICAgICB9XG4gICAgICAgIH0pKTtcblxuICAgICAgICB0ZXN0LmRvbmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgJ0xhbWJkYSBQaXBlbGluZUludm9rZUFjdGlvbiBjYW4gYmUgdXNlZCB0byBpbnZva2UgTGFtYmRhIGZ1bmN0aW9ucyBmcm9tIGEgQ29kZVBpcGVsaW5lJyh0ZXN0OiBUZXN0KSB7XG4gICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG5cbiAgICBjb25zdCBsYW1iZGFGdW4gPSBuZXcgbGFtYmRhLkZ1bmN0aW9uKHN0YWNrLCAnRnVuY3Rpb24nLCB7XG4gICAgICBjb2RlOiBuZXcgbGFtYmRhLklubGluZUNvZGUoJ2JsYScpLFxuICAgICAgaGFuZGxlcjogJ2luZGV4LmhhbmRsZXInLFxuICAgICAgcnVudGltZTogbGFtYmRhLlJ1bnRpbWUuTm9kZUpTNDMsXG4gICAgfSk7XG5cbiAgICBjb25zdCBwaXBlbGluZSA9IG5ldyBjb2RlcGlwZWxpbmUuUGlwZWxpbmUoc3RhY2ssICdQaXBlbGluZScpO1xuXG4gICAgY29uc3QgYnVja2V0ID0gbmV3IHMzLkJ1Y2tldChzdGFjaywgJ0J1Y2tldCcpO1xuICAgIGNvbnN0IHNvdXJjZVN0YWdlID0gcGlwZWxpbmUuYWRkU3RhZ2UoJ1NvdXJjZScpO1xuICAgIGNvbnN0IHNvdXJjZTEgPSBidWNrZXQuYWRkVG9QaXBlbGluZShzb3VyY2VTdGFnZSwgJ1NvdXJjZUFjdGlvbjEnLCB7XG4gICAgICBidWNrZXRLZXk6ICdzb21lL2tleScsXG4gICAgICBvdXRwdXRBcnRpZmFjdE5hbWU6ICdzb3VyY2VBcnRpZmFjdDEnLFxuICAgIH0pO1xuICAgIGNvbnN0IHNvdXJjZTIgPSBidWNrZXQuYWRkVG9QaXBlbGluZShzb3VyY2VTdGFnZSwgJ1NvdXJjZUFjdGlvbjInLCB7XG4gICAgICBidWNrZXRLZXk6ICdhbm90aGVyL2tleScsXG4gICAgICBvdXRwdXRBcnRpZmFjdE5hbWU6ICdzb3VyY2VBcnRpZmFjdDInLFxuICAgIH0pO1xuXG4gICAgY29uc3Qgc3RhZ2UgPSBuZXcgY29kZXBpcGVsaW5lLlN0YWdlKHN0YWNrLCAnU3RhZ2UnLCB7IHBpcGVsaW5lIH0pO1xuICAgIGNvbnN0IGxhbWJkYUFjdGlvbiA9IG5ldyBsYW1iZGEuUGlwZWxpbmVJbnZva2VBY3Rpb24oc3RhY2ssICdJbnZva2VBY3Rpb24nLCB7XG4gICAgICBzdGFnZSxcbiAgICAgIGxhbWJkYTogbGFtYmRhRnVuLFxuICAgICAgdXNlclBhcmFtZXRlcnM6ICdmb28tYmFyLzQyJyxcbiAgICAgIGlucHV0QXJ0aWZhY3RzOiBbXG4gICAgICAgICAgc291cmNlMi5vdXRwdXRBcnRpZmFjdCxcbiAgICAgICAgICBzb3VyY2UxLm91dHB1dEFydGlmYWN0LFxuICAgICAgXSxcbiAgICAgIG91dHB1dEFydGlmYWN0TmFtZXM6IFtcbiAgICAgICAgICAnbGFtYmRhT3V0cHV0MScsXG4gICAgICAgICAgJ2xhbWJkYU91dHB1dDInLFxuICAgICAgICAgICdsYW1iZGFPdXRwdXQzJyxcbiAgICAgIF0sXG4gICAgfSk7XG5cbiAgICBleHBlY3Qoc3RhY2spLnRvKGhhdmVSZXNvdXJjZUxpa2UoJ0FXUzo6Q29kZVBpcGVsaW5lOjpQaXBlbGluZScsIHtcbiAgICAgIFwiQXJ0aWZhY3RTdG9yZVwiOiB7XG4gICAgICAgIFwiTG9jYXRpb25cIjoge1xuICAgICAgICBcIlJlZlwiOiBcIlBpcGVsaW5lQXJ0aWZhY3RzQnVja2V0MjIyNDhGOTdcIlxuICAgICAgICB9LFxuICAgICAgICBcIlR5cGVcIjogXCJTM1wiXG4gICAgICB9LFxuICAgICAgXCJSb2xlQXJuXCI6IHtcbiAgICAgICAgXCJGbjo6R2V0QXR0XCI6IFtcbiAgICAgICAgXCJQaXBlbGluZVJvbGVENjg3MjZGN1wiLFxuICAgICAgICBcIkFyblwiXG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICBcIlN0YWdlc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBcIk5hbWVcIjogXCJTb3VyY2VcIixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICBcIkFjdGlvbnNcIjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICBcIkFjdGlvblR5cGVJZFwiOiB7XG4gICAgICAgICAgICBcIkNhdGVnb3J5XCI6IFwiSW52b2tlXCIsXG4gICAgICAgICAgICBcIk93bmVyXCI6IFwiQVdTXCIsXG4gICAgICAgICAgICBcIlByb3ZpZGVyXCI6IFwiTGFtYmRhXCIsXG4gICAgICAgICAgICBcIlZlcnNpb25cIjogXCIxXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiQ29uZmlndXJhdGlvblwiOiB7XG4gICAgICAgICAgICBcIkZ1bmN0aW9uTmFtZVwiOiB7XG4gICAgICAgICAgICBcIlJlZlwiOiBcIkZ1bmN0aW9uNzY4NTY2NzdcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiVXNlclBhcmFtZXRlcnNcIjogXCJmb28tYmFyLzQyXCJcbiAgICAgICAgICB9LFxuICAgICAgICAgIFwiSW5wdXRBcnRpZmFjdHNcIjogW1xuICAgICAgICAgICAgeyBcIk5hbWVcIjogXCJzb3VyY2VBcnRpZmFjdDJcIiB9LFxuICAgICAgICAgICAgeyBcIk5hbWVcIjogXCJzb3VyY2VBcnRpZmFjdDFcIiB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgXCJOYW1lXCI6IFwiSW52b2tlQWN0aW9uXCIsXG4gICAgICAgICAgXCJPdXRwdXRBcnRpZmFjdHNcIjogW1xuICAgICAgICAgICAgeyBcIk5hbWVcIjogXCJsYW1iZGFPdXRwdXQxXCIgfSxcbiAgICAgICAgICAgIHsgXCJOYW1lXCI6IFwibGFtYmRhT3V0cHV0MlwiIH0sXG4gICAgICAgICAgICB7IFwiTmFtZVwiOiBcImxhbWJkYU91dHB1dDNcIiB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgXCJSdW5PcmRlclwiOiAxXG4gICAgICAgICAgfVxuICAgICAgICBdLFxuICAgICAgICBcIk5hbWVcIjogXCJTdGFnZVwiXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KSk7XG5cbiAgICB0ZXN0LmVxdWFsKGxhbWJkYUFjdGlvbi5vdXRwdXRBcnRpZmFjdHMoKS5sZW5ndGgsIDMpO1xuICAgIHRlc3Qubm90RXF1YWwobGFtYmRhQWN0aW9uLm91dHB1dEFydGlmYWN0KCdsYW1iZGFPdXRwdXQyJyksIHVuZGVmaW5lZCk7XG5cbiAgICBleHBlY3Qoc3RhY2ssIC8qIHNraXAgdmFsaWRhdGlvbiAqLyB0cnVlKS50byhoYXZlUmVzb3VyY2UoJ0FXUzo6SUFNOjpQb2xpY3knLCB7XG4gICAgICBcIlBvbGljeURvY3VtZW50XCI6IHtcbiAgICAgICAgXCJTdGF0ZW1lbnRcIjogW1xuICAgICAgICB7XG4gICAgICAgICAgXCJBY3Rpb25cIjogW1xuICAgICAgICAgIFwiY29kZXBpcGVsaW5lOlB1dEpvYlN1Y2Nlc3NSZXN1bHRcIixcbiAgICAgICAgICBcImNvZGVwaXBlbGluZTpQdXRKb2JGYWlsdXJlUmVzdWx0XCJcbiAgICAgICAgICBdLFxuICAgICAgICAgIFwiRWZmZWN0XCI6IFwiQWxsb3dcIixcbiAgICAgICAgICBcIlJlc291cmNlXCI6IFwiKlwiXG4gICAgICAgIH1cbiAgICAgICAgXSxcbiAgICAgICAgXCJWZXJzaW9uXCI6IFwiMjAxMi0xMC0xN1wiXG4gICAgICB9LFxuICAgICAgXCJQb2xpY3lOYW1lXCI6IFwiRnVuY3Rpb25TZXJ2aWNlUm9sZURlZmF1bHRQb2xpY3kyRjQ5OTk0QVwiLFxuICAgICAgXCJSb2xlc1wiOiBbXG4gICAgICAgIHtcbiAgICAgICAgXCJSZWZcIjogXCJGdW5jdGlvblNlcnZpY2VSb2xlNjc1QkIwNEFcIlxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSkpO1xuXG4gICAgdGVzdC5kb25lKCk7XG4gIH0sXG5cbiAgJ0NvZGVDb21taXQgQWN0aW9uJzoge1xuICAgICdkb2VzIG5vdCBwb2xsIGZvciBjaGFuZ2VzIGJ5IGRlZmF1bHQnKHRlc3Q6IFRlc3QpIHtcbiAgICAgIGNvbnN0IHN0YWNrID0gbmV3IGNkay5TdGFjaygpO1xuICAgICAgY29uc3Qgc291cmNlQWN0aW9uID0gbmV3IGNvZGVjb21taXQuUGlwZWxpbmVTb3VyY2VBY3Rpb24oc3RhY2ssICdzdGFnZScsIHtcbiAgICAgICAgc3RhZ2U6IHN0YWdlRm9yVGVzdGluZyhzdGFjayksXG4gICAgICAgIG91dHB1dEFydGlmYWN0TmFtZTogJ1NvbWVBcnRpZmFjdCcsXG4gICAgICAgIHJlcG9zaXRvcnk6IHJlcG9zaXRvcnlGb3JUZXN0aW5nKHN0YWNrKSxcbiAgICAgIH0pO1xuXG4gICAgICB0ZXN0LmVxdWFsKHNvdXJjZUFjdGlvbi5jb25maWd1cmF0aW9uLlBvbGxGb3JTb3VyY2VDaGFuZ2VzLCBmYWxzZSk7XG5cbiAgICAgIHRlc3QuZG9uZSgpO1xuICAgIH0sXG5cbiAgICAnZG9lcyBub3QgcG9sbCBmb3Igc291cmNlIGNoYW5nZXMgd2hlbiBleHBsaWNpdGx5IHNldCB0byBmYWxzZScodGVzdDogVGVzdCkge1xuICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKCk7XG4gICAgICBjb25zdCBzb3VyY2VBY3Rpb24gPSBuZXcgY29kZWNvbW1pdC5QaXBlbGluZVNvdXJjZUFjdGlvbihzdGFjaywgJ3N0YWdlJywge1xuICAgICAgICBzdGFnZTogc3RhZ2VGb3JUZXN0aW5nKHN0YWNrKSxcbiAgICAgICAgb3V0cHV0QXJ0aWZhY3ROYW1lOiAnU29tZUFydGlmYWN0JyxcbiAgICAgICAgcmVwb3NpdG9yeTogcmVwb3NpdG9yeUZvclRlc3Rpbmcoc3RhY2spLFxuICAgICAgICBwb2xsRm9yU291cmNlQ2hhbmdlczogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgdGVzdC5lcXVhbChzb3VyY2VBY3Rpb24uY29uZmlndXJhdGlvbi5Qb2xsRm9yU291cmNlQ2hhbmdlcywgZmFsc2UpO1xuXG4gICAgICB0ZXN0LmRvbmUoKTtcbiAgICB9LFxuICB9LFxuXG4gICdjcm9zcy1yZWdpb24gUGlwZWxpbmUnOiB7XG4gICAgJ2dlbmVyYXRlcyB0aGUgcmVxdWlyZWQgQWN0aW9uICYgQXJ0aWZhY3RTdG9yZXMgcHJvcGVydGllcyBpbiB0aGUgdGVtcGxhdGUnKHRlc3Q6IFRlc3QpIHtcbiAgICAgIGNvbnN0IHBpcGVsaW5lUmVnaW9uID0gJ3VzLXdlc3QtMic7XG4gICAgICBjb25zdCBwaXBlbGluZUFjY291bnQgPSAnMTIzJztcblxuICAgICAgY29uc3QgYXBwID0gbmV3IGNkay5BcHAoKTtcblxuICAgICAgY29uc3Qgc3RhY2sgPSBuZXcgY2RrLlN0YWNrKGFwcCwgJ1Rlc3RTdGFjaycsIHtcbiAgICAgICAgZW52OiB7XG4gICAgICAgICAgcmVnaW9uOiBwaXBlbGluZVJlZ2lvbixcbiAgICAgICAgICBhY2NvdW50OiBwaXBlbGluZUFjY291bnQsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGJ1Y2tldCA9IG5ldyBzMy5CdWNrZXQoc3RhY2ssICdNeUJ1Y2tldCcpO1xuICAgICAgY29uc3QgcGlwZWxpbmUgPSBuZXcgY29kZXBpcGVsaW5lLlBpcGVsaW5lKHN0YWNrLCAnTXlQaXBlbGluZScsIHtcbiAgICAgICAgY3Jvc3NSZWdpb25SZXBsaWNhdGlvbkJ1Y2tldHM6IHtcbiAgICAgICAgICAndXMtd2VzdC0xJzogJ3Nmby1yZXBsaWNhdGlvbi1idWNrZXQnLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHN0YWdlMSA9IHBpcGVsaW5lLmFkZFN0YWdlKCdTdGFnZTEnKTtcbiAgICAgIGNvbnN0IHNvdXJjZUFjdGlvbiA9IGJ1Y2tldC5hZGRUb1BpcGVsaW5lKHN0YWdlMSwgJ0J1Y2tldFNvdXJjZScsIHtcbiAgICAgICAgYnVja2V0S2V5OiAnL3NvbWUva2V5JyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzdGFnZTIgPSBwaXBlbGluZS5hZGRTdGFnZSgnU3RhZ2UyJyk7XG4gICAgICBuZXcgY2xvdWRmb3JtYXRpb24uUGlwZWxpbmVDcmVhdGVSZXBsYWNlQ2hhbmdlU2V0QWN0aW9uKHN0YWNrLCAnQWN0aW9uMScsIHtcbiAgICAgICAgc3RhZ2U6IHN0YWdlMixcbiAgICAgICAgY2hhbmdlU2V0TmFtZTogJ0NoYW5nZVNldCcsXG4gICAgICAgIHRlbXBsYXRlUGF0aDogc291cmNlQWN0aW9uLm91dHB1dEFydGlmYWN0LmF0UGF0aCgndGVtcGxhdGUueWFtbCcpLFxuICAgICAgICBzdGFja05hbWU6ICdTb21lU3RhY2snLFxuICAgICAgICByZWdpb246IHBpcGVsaW5lUmVnaW9uLFxuICAgICAgICBhZG1pblBlcm1pc3Npb25zOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgbmV3IGNsb3VkZm9ybWF0aW9uLlBpcGVsaW5lQ3JlYXRlVXBkYXRlU3RhY2tBY3Rpb24oc3RhY2ssICdBY3Rpb24yJywge1xuICAgICAgICBzdGFnZTogc3RhZ2UyLFxuICAgICAgICB0ZW1wbGF0ZVBhdGg6IHNvdXJjZUFjdGlvbi5vdXRwdXRBcnRpZmFjdC5hdFBhdGgoJ3RlbXBsYXRlLnlhbWwnKSxcbiAgICAgICAgc3RhY2tOYW1lOiAnT3RoZXJTdGFjaycsXG4gICAgICAgIHJlZ2lvbjogJ3VzLWVhc3QtMScsXG4gICAgICAgIGFkbWluUGVybWlzc2lvbnM6IGZhbHNlLFxuICAgICAgfSk7XG4gICAgICBuZXcgY2xvdWRmb3JtYXRpb24uUGlwZWxpbmVFeGVjdXRlQ2hhbmdlU2V0QWN0aW9uKHN0YWNrLCAnQWN0aW9uMycsIHtcbiAgICAgICAgc3RhZ2U6IHN0YWdlMixcbiAgICAgICAgY2hhbmdlU2V0TmFtZTogJ0NoYW5nZVNldCcsXG4gICAgICAgIHN0YWNrTmFtZTogJ1NvbWVTdGFjaycsXG4gICAgICAgIHJlZ2lvbjogJ3VzLXdlc3QtMScsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KHN0YWNrKS50byhoYXZlUmVzb3VyY2VMaWtlKCdBV1M6OkNvZGVQaXBlbGluZTo6UGlwZWxpbmUnLCB7XG4gICAgICAgIFwiQXJ0aWZhY3RTdG9yZXNcIjogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIFwiUmVnaW9uXCI6IFwidXMtZWFzdC0xXCIsXG4gICAgICAgICAgICBcIkFydGlmYWN0U3RvcmVcIjoge1xuICAgICAgICAgICAgICBcIlR5cGVcIjogXCJTM1wiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIFwiUmVnaW9uXCI6IFwidXMtd2VzdC0xXCIsXG4gICAgICAgICAgICBcIkFydGlmYWN0U3RvcmVcIjoge1xuICAgICAgICAgICAgICBcIkxvY2F0aW9uXCI6IFwic2ZvLXJlcGxpY2F0aW9uLWJ1Y2tldFwiLFxuICAgICAgICAgICAgICBcIlR5cGVcIjogXCJTM1wiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIFwiUmVnaW9uXCI6IFwidXMtd2VzdC0yXCIsXG4gICAgICAgICAgICBcIkFydGlmYWN0U3RvcmVcIjoge1xuICAgICAgICAgICAgICBcIlR5cGVcIjogXCJTM1wiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICBcIlN0YWdlc1wiOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgXCJOYW1lXCI6IFwiU3RhZ2UxXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBcIk5hbWVcIjogXCJTdGFnZTJcIixcbiAgICAgICAgICAgIFwiQWN0aW9uc1wiOiBbXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBcIk5hbWVcIjogXCJBY3Rpb24xXCIsXG4gICAgICAgICAgICAgICAgXCJSZWdpb25cIjogXCJ1cy13ZXN0LTJcIixcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwiTmFtZVwiOiBcIkFjdGlvbjJcIixcbiAgICAgICAgICAgICAgICBcIlJlZ2lvblwiOiBcInVzLWVhc3QtMVwiLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJOYW1lXCI6IFwiQWN0aW9uM1wiLFxuICAgICAgICAgICAgICAgIFwiUmVnaW9uXCI6IFwidXMtd2VzdC0xXCIsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdLFxuICAgICAgICAgIH0sXG4gICAgICAgIF1cbiAgICAgIH0pKTtcblxuICAgICAgdGVzdC5lcXVhbChwaXBlbGluZS5jcm9zc1JlZ2lvblNjYWZmb2xkU3RhY2tzW3BpcGVsaW5lUmVnaW9uXSwgdW5kZWZpbmVkKTtcbiAgICAgIHRlc3QuZXF1YWwocGlwZWxpbmUuY3Jvc3NSZWdpb25TY2FmZm9sZFN0YWNrc1sndXMtd2VzdC0xJ10sIHVuZGVmaW5lZCk7XG5cbiAgICAgIGNvbnN0IHVzRWFzdDFTY2FmZm9sZFN0YWNrID0gcGlwZWxpbmUuY3Jvc3NSZWdpb25TY2FmZm9sZFN0YWNrc1sndXMtZWFzdC0xJ107XG4gICAgICB0ZXN0Lm5vdEVxdWFsKHVzRWFzdDFTY2FmZm9sZFN0YWNrLCB1bmRlZmluZWQpO1xuICAgICAgdGVzdC5lcXVhbCh1c0Vhc3QxU2NhZmZvbGRTdGFjay5lbnYucmVnaW9uLCAndXMtZWFzdC0xJyk7XG4gICAgICB0ZXN0LmVxdWFsKHVzRWFzdDFTY2FmZm9sZFN0YWNrLmVudi5hY2NvdW50LCBwaXBlbGluZUFjY291bnQpO1xuICAgICAgdGVzdC5vayh1c0Vhc3QxU2NhZmZvbGRTdGFjay5ub2RlLmlkLmluZGV4T2YoJ3VzLWVhc3QtMScpICE9PSAtMSxcbiAgICAgICAgYGV4cGVjdGVkICcke3VzRWFzdDFTY2FmZm9sZFN0YWNrLm5vZGUuaWR9JyB0byBjb250YWluICd1cy1lYXN0LTEnYCk7XG5cbiAgICAgIHRlc3QuZG9uZSgpO1xuICAgIH0sXG4gIH0sXG59O1xuXG5mdW5jdGlvbiBzdGFnZUZvclRlc3Rpbmcoc3RhY2s6IGNkay5TdGFjayk6IGNvZGVwaXBlbGluZS5TdGFnZSB7XG4gIGNvbnN0IHBpcGVsaW5lID0gbmV3IGNvZGVwaXBlbGluZS5QaXBlbGluZShzdGFjaywgJ3BpcGVsaW5lJyk7XG4gIHJldHVybiBuZXcgY29kZXBpcGVsaW5lLlN0YWdlKHBpcGVsaW5lLCAnc3RhZ2UnLCB7IHBpcGVsaW5lIH0pO1xufVxuXG5mdW5jdGlvbiByZXBvc2l0b3J5Rm9yVGVzdGluZyhzdGFjazogY2RrLlN0YWNrKTogY29kZWNvbW1pdC5SZXBvc2l0b3J5IHtcbiAgcmV0dXJuIG5ldyBjb2RlY29tbWl0LlJlcG9zaXRvcnkoc3RhY2ssICdSZXBvc2l0b3J5Jywge1xuICAgIHJlcG9zaXRvcnlOYW1lOiAnUmVwb3NpdG9yeSdcbiAgfSk7XG59XG4iXX0=